<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Character List</title>
</head>
<body>

    <div style="margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
        <h1>My Characters</h1>
        
        {% if request.user.is_authenticated %}
            <p>Logged in as: <strong>{{ request.user }}</strong> | <a href="{% url 'logout' %}">Logout</a></p>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <form method="GET" style="display: inline;">
            <input type='text' name='search-area' placeholder="Search..." value="{{search_input}}">
            <input type="submit" value="Search">
        </form>
        
        {% if request.user.is_authenticated %}
            <span style="margin-left: 20px;">
                <a href="{% url 'character-create' %}"><strong>+ Add New Character</strong></a>
            </span>
        {% endif %}
    </div>

    <hr>
    <ul>
        {% for character in characters %}
        <li style="margin-bottom: 10px; padding: 10px; border: 1px solid #eee;">
            <a href="{% url 'character' character.id %}" style="font-size: 1.2em; font-weight: bold; text-decoration: none;">
                {{ character.character_name }}
            </a>

        <span style="color: gray; margin-left: 10px;">
                {{ character.get_character_class_display }}
                
                {% if character.subclass and character.subclass != 'none' %}
                    - {{ character.get_subclass_display }}
                
                {% elif character.rogue_profile %}
                    - {{ character.rogue_profile.get_subclass_type_display }}
                {% elif character.cleric_profile %}
                    - {{ character.cleric_profile.get_subclass_type_display }}
                {% elif character.fighter_profile %}
                    - {{ character.fighter_profile.get_subclass_type_display }}
                {% elif character.paladin_profile %}
                    - {{ character.paladin_profile.get_subclass_type_display }}
                {% elif character.ranger_profile %}
                    - {{ character.ranger_profile.get_subclass_type_display }}
                {% elif character.bard_profile %}
                    - {{ character.bard_profile.get_subclass_type_display }}
                {% endif %}
            </span>

            <div style="margin-top: 5px;">
                <a href="{% url 'character-update' character.id %}" style="margin-right: 10px; color: blue;">Edit</a>
                <a href="{% url 'character-delete' character.id %}" style="color: red;">Delete</a>
            </div>
        </li>
        {% empty %}
        <p>No characters found.</p>
        {% endfor %}
    </ul>

</body>
</html>